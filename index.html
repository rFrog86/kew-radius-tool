<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Kew Gardens Radius Tool</title>
  <style>
    body { text-align: center; font-family: Arial; }
    canvas { border: 1px solid #ccc; cursor: crosshair; max-width: 100%; height: auto; }
    #controls { margin: 10px 0; }
  </style>
</head>
<body>
  <h2>RBG Kew Gardens Radius Tool</h2>

  <div id="controls">
    <label for="radiusInput">Radius (meters):</label>
    <input type="number" id="radiusInput" value="50" min="1" />
    <button onclick="clearCanvas()">Clear</button>
  </div>

  <canvas id="mapCanvas" width="1086" height="768"></canvas>

  <script>
    const canvas = document.getElementById('mapCanvas');
    const ctx = canvas.getContext('2d');
    const radiusInput = document.getElementById('radiusInput');

    const img = new Image();
    img.src = 'kew-map.jpg'; // Use same image file name
    img.onload = () => ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

    // Scaling based on map: 50m ≈ 96 pixels
    const pixelsPerMeter = 25 / 50; // ≈ 3.84 pixels per meter

    canvas.addEventListener('click', function(event) {
      const rect = canvas.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      const radiusMeters = parseFloat(radiusInput.value);
      const radiusPixels = radiusMeters * pixelsPerMeter;

      drawShadedCircle(x, y, radiusPixels);
    });

    function drawShadedCircle(x, y, r) {
      ctx.beginPath();
      ctx.arc(x, y, r, 0, 2 * Math.PI);
      ctx.fillStyle = 'rgba(0, 128, 255, 0.3)';
      ctx.fill();
      ctx.strokeStyle = 'rgba(0, 128, 255, 0.8)';
      ctx.lineWidth = 2;
      ctx.stroke();
    }

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
    }
  </script>
</body>
</html>
